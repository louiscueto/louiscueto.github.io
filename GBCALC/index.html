<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>theimprovguy | Aluminum Anodization GB</title>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" media="all">
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" integrity="sha512-O03ntXoVqaGUTAeAmvQ2YSzkCvclZEcPQu1eqloPaHfJ5RuNGiS4l+3duaidD801P50J28EHyonCV06CUlTSag==" crossorigin="anonymous" />

	<style type="text/css">
		*:not(i) {
			box-sizing: border-box !important;
		}
		span.helper {
			font-size: .75em;
			color: rgba(0, 0, 0, .5);
		}
		#cost {
			font-weight: bold;
			font-size: 2rem;
		}
		#breakdown {
			display: none;
		}
		#breakdown td:nth-child(2) {
			font-weight: bold;
			text-align: right;
		}
		.row-header {
			background: rgba(0, 0, 0, .05);
    		padding-left: .5em;
		}

		#main {
			width: 75%;
			margin: 2em auto;
		}
		@media screen and (max-width: 500px) {
			#main {
				width: 100%;
				padding: 1em 2em !important;
				margin: 0 !important;
				border: none !important;
			}
			#board-div {
				width: 100% !important;
			}
			#grid.grid > .column {
				padding: 1em 0 !important;
			}
			#header {
				display: flex;
				flex-direction: column;
			}
			#header > img {
				margin: auto;
			}
		}
	</style>
</head>
<body>

<div class="ui basic modal" id="modal">
	<i class="close icon"></i>
	<div class="scrolling content">

		<p>
			From left to right, top to bottom: <br>
			<b>red &nbsp; | &nbsp; pink &nbsp; | &nbsp; rose gold</b> <br>
			<b>violet &nbsp; | &nbsp; clear</b> <br>
			<b>orange gold &nbsp; | &nbsp; grey &nbsp; | &nbsp; green</b> <br>
			<b>blue &nbsp; | &nbsp; black</b>
		</p>

		<img src="color-samples.jpg" style="width: 100%; height: auto;">
		
	</div>
</div>

<div class="ui very padded segment" id="main">
	<h1 class="ui header" id="header">
		<img src="logo.png" class="ui circular image">
		Aluminum Anodization GB
		<!-- <div class="sub header">Kindly screenshot the page after calculating the cost and send it to the <a href="facebook.com/theimprovguy" target="_blank">page</a> along with your color choice. Color samples can be found <a href="https://imgur.com/a/VQY1uHA" target="_blank">here</a>. Thank you!</div> -->
		<div class="sub header">Kindly screenshot the page after calculating the cost and send it to the <a href="facebook.com/theimprovguy" target="_blank">page</a> along with your color choice. Color samples can be found <a onclick='$("#modal").modal("show");' style="cursor: pointer;">here</a>. Thank you!</div>
	</h1>

	<div class="ui stackable grid" id="grid">
		<div class="ten wide column">
			<div class="ui form">
				<h1 class="ui small header">Cases</h1>
				<div class="six wide field" id="board-div">
					<label>Enter name of your board</label>
					<input type="text" name="board" id="board" placeholder="Skog Reboot">
				</div>
				<div class="required field">
					<label>1 &nbsp; <span class="helper">|</span> &nbsp; # of pcs of your aluminum case</label>
				</div>
				<div class="inline fields">
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="pcs" value="1">
							<label>1 pc</label>
						</div>
					</div>
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="pcs" value="2">
							<label>2 pcs</label>
						</div>
					</div>
				</div>
				<div class="required field">
					<label>2 &nbsp; <span class="helper">|</span> &nbsp; Pick your case's form factor</label>
				</div>
				<div class="inline fields" id="form-factors"></div>


				<div class="required field">
					<label>3 &nbsp; <span class="helper">|</span> &nbsp; choose service</label>
				</div>
				<div class="inline fields">
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="service" value="anodizing">
							<label>Anodizing</label>
						</div>
					</div>
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="service" value="sandblast">
							<label>Sandblast + Anodizing</label>
						</div>
					</div>
				</div>

				<div class="required field">
					<label>4 &nbsp; <span class="helper">|</span> &nbsp; Case has flat bottom part (like the ID80)</label>
				</div>
				<div class="inline fields">
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="flat_bottom" value="yes" id="yes-flat_bottom">
							<label>Yes</label>
						</div>
					</div>
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="flat_bottom" value="no" id="no-flat_bottom">
							<label>No</label>
						</div>
					</div>
				</div>

				<div class="required field">
					<label>5 &nbsp; <span class="helper">|</span> &nbsp; Case has integrated plate</label>
				</div>
				<div class="inline fields">
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="integrated_plate" value="yes">
							<label>Yes</label>
						</div>
					</div>
					<div class="field">
						<div class="ui radio checkbox">
							<input type="radio" name="integrated_plate" value="no">
							<label>No</label>
						</div>
					</div>
				</div>

				<div class="ui divider"></div>
				<h1 class="ui small header">Plates</h1>
				<div class="inline fields" id="plate-form-factors"></div>
				
				<div class="ui divider"></div>
				<h1 class="ui small header">Knobs</h1>
				<div class="field">
					<label>Enter # of aluminum knobs to be anodized</label>
					<input type="number" name="knobs" id="knobs" min="0" style="width: fit-content;" value="0">
				</div>
				<div class="ui divider"></div>
				<div class="field">
					<button class="ui primary button" onclick="calculate();">Calculate</button>
					<button class="ui button" onclick="klir();" id="clear">Clear</button>
				</div>
			</div><!-- end of form -->
		</div>
		<div class="six wide column">
			<table class="ui very basic celled table" id="breakdown"></table>
		</div>
	</div>
	
</div>
<script type="text/javascript">

	var form_factors = [
		{label: "40%", value: "40"},
		{label: "60%", value: "60"},
		{label: "65%", value: "65"},
		{label: "75%", value: "75"},
		{label: "TKL", value: "TKL"},
		{label: "980", value: "980"},
		{label: "1800", value: "1800"},
		{label: "Full", value: "full"},
	];

	var labels = {
		"40": "40%",
		"60": "60%",
		"65": "65%",
		"75": "75%",
		"TKL": "TKL",
		"980": "980",
		"1800": "1800",
		"full": "Full",
		"none": "None",
		"anodizing": "Anodizing",
		"sandblast": "Sandblast + Anodizing",
	};

	var PRICING = {
		"1": {
			"40": {anodizing: 1500, sandblast: 2500},
			"60": {anodizing: 1500, sandblast: 2500},
			"65": {anodizing: 1500, sandblast: 2500},
			"75": {anodizing: 2000, sandblast: 3000},
			"TKL": {anodizing: 2500, sandblast: 3500},
			"980": {anodizing: 2500, sandblast: 3500},
			"1800": {anodizing: 2800, sandblast: 3800},
			"full": {anodizing: 3000, sandblast: 4000},
		},
		"2": {
			"40": {anodizing: 2500, sandblast: 3000},
			"60": {anodizing: 2500, sandblast: 3500},
			"65": {anodizing: 2500, sandblast: 3500},
			"75": {anodizing: 3000, sandblast: 4000},
			"TKL": {anodizing: 3500, sandblast: 4500},
			"980": {anodizing: 3500, sandblast: 4500},
			"1800": {anodizing: 3800, sandblast: 4800},
			"full": {anodizing: 4000, sandblast: 5000},
		},
		"knobs": 250,
		"plates": {
			"40": 800,
			"60": 800,
			"65": 800,
			"75": 1000,
			"TKL": 1200,
			"980": 1300,
			"1800": 1400,
			"full": 1500,
			"none": 0,
		},
		"flat_bottom": -200,
		"integrated_plate": 350,
	};

	let fields = "";
	let plates = "";
	for (let i = 0; i < form_factors.length; i++) {
		let form = form_factors[i];
		fields += '<div class="field">\
					<div class="ui radio checkbox">\
						<input type="radio" name="form_factors" value="'+form.value+'">\
						<label>'+form.label+'</label>\
					</div>\
				</div>';
		plates += '<div class="field">\
					<div class="ui radio checkbox">\
						<input type="radio" name="plate_form_factors" value="'+form.value+'">\
						<label>'+form.label+'</label>\
					</div>\
				</div>';
	}
	$("#form-factors").html(fields);

	plates += '<div class="field">\
					<div class="ui radio checkbox">\
						<input type="radio" name="plate_form_factors" value="none" checked="" id="plate-none">\
						<label>None</label>\
					</div>\
				</div>';
	$("#plate-form-factors").html(plates);

	function calculate () {

		let board 				= $("#board").val();
		let pcs 				= $("input[name=pcs]:checked").val();
		if (!!pcs) {
			pcs = parseInt(pcs);
		}
		let form_factor 		= $("input[name=form_factors]:checked").val();
		let service 			= $("input[name=service]:checked").val();
		
		let color 				= $("input[name=color]:checked").val();
		let plate 				= $("input[name=plate_form_factors]:checked").val();
		let flat_bottom 		= $("input[name=flat_bottom]:checked").val();
		let integrated_plate 	= $("input[name=integrated_plate]:checked").val();
		let knobs 				= $("#knobs").val();

		let pass 				= 5;
		let score 				= 0;
		let errmsg 				= [];

		if (!pcs) {
			errmsg.push('Please indicate the # of pcs of your aluminum case.');
		} else {
			score++;
		}
		if (!form_factor) {
			errmsg.push('Please the form factor of your aluminum case.');
		} else {
			score++;
		}
		if (!service) {
			errmsg.push('Choose between Anodizing and Sandblast + Anodizing');
		} else {
			score++;
		}
		if (!flat_bottom) {
			errmsg.push('Indicate if your case has a flat bottom part');
		} else {
			score++;
		}
		if (!integrated_plate) {
			errmsg.push('Indicate if your case has an integrated plate');
		} else {
			score++;
		}

		if (errmsg.length > 0) {
			iziToast.show({
				theme: "dark", layout: 2, position: "topCenter",
				icon: "yellow info circle icon",
				title: "Requirements for the calculator",
				message: "<ul><li>"+errmsg.join("</li><li>")+"</li></ul>",
			});
		} else {
			// calculate

			let breakdown = [];
			let cost = 0;
			if (!!knobs) {
				knobs = parseInt(knobs);
			}
			// cases
			breakdown.push('<tr><td colspan="2" class="row-header"><b>Cases</b></td></tr>');
			cost += PRICING[pcs][form_factor][service];

			if (!!board) {
				breakdown.push('<tr><td>'+board+' for '+labels[service]+' (case is '+pcs+' pcs)</td><td class="collapsing">&#8369; '+numbeautify(PRICING[pcs][form_factor][service])+'</span></td></tr>');
			} else {
				breakdown.push('<tr><td>'+labels[service]+' (case is '+pcs+' pcs)</td><td class="collapsing">&#8369; '+numbeautify(PRICING[pcs][form_factor][service])+'</span></td></tr>');
			}
			if (flat_bottom == "yes") { // flat bottom
				cost += PRICING.flat_bottom
				breakdown.push('<tr><td>Case has a flat bottom</td><td class="collapsing">&#8369; '+numbeautify(PRICING.flat_bottom)+'</span></td></tr>');
			}
			if (integrated_plate == "yes") { // integplate
				cost += PRICING.integrated_plate
				breakdown.push('<tr><td>Case has an integrated plate</td><td class="collapsing">&#8369; '+numbeautify(PRICING.integrated_plate)+'</span></td></tr>');
			}

			// plates
			if (plate != "none") {
				breakdown.push('<tr><td colspan="2" class="row-header"><b>Plates</b></td></tr>');
				cost += PRICING.plates[plate];
				breakdown.push('<tr><td>Alu plate form factor ('+labels[plate]+')</td><td class="collapsing">&#8369; '+numbeautify(PRICING.plates[plate])+'</span></td></tr>');
			}
			
			// knobs
			if (knobs > 0) {
				breakdown.push('<tr><td colspan="2" class="row-header"><b>Knobs</b></td></tr>');
				cost += PRICING.knobs*knobs;
				breakdown.push('<tr><td>x'+knobs+'</td><td class="collapsing">&#8369; '+numbeautify(PRICING.knobs*knobs)+'</td></tr>');
			}

			breakdown.push('<tr><td>&nbsp;</td><td class="collapsing"><span id="cost">&#8369; '+numbeautify(cost)+'</span></td></tr>');

			$("#breakdown").html(breakdown.join("")).show();
			// $("#breakdown").transition("fade left");
			$("#clear").addClass("disabled");
		}
		console.log("-------");

	}

	function klir () {

		$("input[name=pcs]:checked").prop("checked", false);
		$("input[name=form_factors]:checked").prop("checked", false);
		$("input[name=service]:checked").prop("checked", false);
		$("input[name=plate_form_factors]:checked").prop("checked", false);
		$("input[name=flat_bottom]:checked").prop("checked", false);
		$("input[name=integrated_plate]:checked").prop("checked", false);

		$("#plate-none").trigger("click");
		$("#board").val("");
		$("#knobs").val(0);
	}

	function numbeautify (number) {
		return new Intl.NumberFormat().format(number);
	}

	$("#knob").on("input", function () {
		let val = $(this).val();
		if (!!val) {
			$(this).val(parseInt(parse));
		}
	});

	$("input[name=pcs]").on("click", function () {
		if (this.value == "1") {
			$("#no-flat_bottom").prop("checked", true);
			$("input[name=flat_bottom]").prop("disabled", true);
		} else if (this.value == "2") {
			$("input[name=flat_bottom]").prop("disabled", false);
			$("input[name=flat_bottom]").prop("checked", false);
		}
	});

</script>
</body>
</html>